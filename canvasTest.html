<script>
let host = document.createElement("div");
let root = host.attachShadow({ mode: 'closed' });
//global canvas.
let canvas = null;

//global mouse relative positions.
let lastX = null;
let lastY = null;
let mouseX = null;
let mouseY = null;

//global flags
let drawingMouseDragged = false;
let lifted = false;

window.onload = function init() {
	canvas = document.createElement("canvas");
	canvas.height = canvas.width = 500;
	resetCanvas();
	document.body.appendChild(canvas);
	canvas.addEventListener("mousedown", function(event) {
		drawingMouseDragged = true;
	}, true);
	canvas.addEventListener("mousemove", function(event) {
		if(drawingMouseDragged) {
			updateMouseLocation(event);
		}
		paint(true);
	}, true);
	window.addEventListener("mouseup", function() {
		drawingMouseDragged = false;
		lifted = true;
	}, true);
	//unneeded for if out of canvas.
	/*canvas.addEventListener("mouseout", function() {
		drawingMouseDragged = false;
	}, true);*/
	
		// appended root expected for when canvas is done painting.
		root.appendChild(canvas);
		document.body.appendChild(host);

}

function resetCanvas() {
	var bg = canvas.getContext("2d");
	bg.fillStyle = "rgb(255,238,190)"; //yellow paper color
    bg.fillRect(0,0,canvas.width,canvas.height);
	bg.fill();
}
function paint(isPC) {
	if(drawingMouseDragged) {
		var pen = canvas.getContext("2d");
		
		//prototype particle dot drawing method.
		/*pen.fillStyle = "rgba(0,0,0,0.35)";
		pen.fillRect(mouseX-10,mouseY-10, 4, 4);
		pen.fillStyle = "rgba(0,0,0,1)";
		pen.fillRect(mouseX-9,mouseY-9, 2, 2);
		pen.fill();*/
		
		//new line conenct method.
		if(isPC) {
			pen.beginPath();
			pen.moveTo(lastX - 10,lastY - 10);
			pen.lineTo(mouseX - 10,mouseY - 10)
			pen.stroke();
		} else {
			pen.beginPath();
			pen.moveTo(lastX,lastY);
			pen.lineTo(mouseX,mouseY)
			pen.stroke();
		}
	}
}

function updateMouseLocation(event) {
	if(lifted || mouseX == null & mouseY == null) {
		lastX = mouseX = event.clientX;
		lastY = mouseY = event.clientT;
		lifted = false;
	} else {
		lastX = mouseX;
		lastY = mouseY;
		mouseX = event.clientX;
		mouseY = event.clientY;
	}
}
</script>
<input type="button" onclick="resetCanvas()" value ="clear board" style="position:fixed;top:50%;"/>